<Project Sdk="Microsoft.NET.Sdk.WindowsDesktop">
  <PropertyGroup>
    <TargetFramework>net48</TargetFramework>
    <UseWindowsForms>true</UseWindowsForms>
    <AssemblyName>JsonViewer.Managed</AssemblyName>
    <RootNamespace>EPocalipse.Json.Viewer</RootNamespace>
    <GenerateAssemblyInfo>false</GenerateAssemblyInfo>
    <Nullable>enable</Nullable>
    <LangVersion>10.0</LangVersion>
    <AppendTargetFrameworkToOutputPath>false</AppendTargetFrameworkToOutputPath>
    <AppendRuntimeIdentifierToOutputPath>false</AppendRuntimeIdentifierToOutputPath>
    <EnableDefaultCompileItems>false</EnableDefaultCompileItems>
    <EnableDefaultEmbeddedResourceItems>false</EnableDefaultEmbeddedResourceItems>
    <ProjectGuid>{FAA575FC-812E-4C0F-A39A-543115FDC31F}</ProjectGuid>
  </PropertyGroup>

  <ItemGroup>
    <Compile Include="EntryPoint.cs" />
    <Compile Include="ViewerHost.cs" />
    <Compile Include="WindowInterop.cs" />

    <Compile Include="..\..\..\..\jsonViewer\JsonViewer\GridVisualizer.cs">
      <Link>JsonViewer\GridVisualizer.cs</Link>
    </Compile>
    <Compile Include="..\..\..\..\jsonViewer\JsonViewer\GridVisualizer.Designer.cs">
      <Link>JsonViewer\GridVisualizer.Designer.cs</Link>
      <DependentUpon>GridVisualizer.cs</DependentUpon>
    </Compile>
    <Compile Include="..\..\..\..\jsonViewer\JsonViewer\InternalPlugins.cs">
      <Link>JsonViewer\InternalPlugins.cs</Link>
    </Compile>
    <Compile Include="..\..\..\..\jsonViewer\JsonViewer\IJsonViewerPlugin.cs">
      <Link>JsonViewer\IJsonViewerPlugin.cs</Link>
    </Compile>
    <Compile Include="..\..\..\..\jsonViewer\JsonViewer\JsonFields.cs">
      <Link>JsonViewer\JsonFields.cs</Link>
    </Compile>
    <Compile Include="..\..\..\..\jsonViewer\JsonViewer\JsonObject.cs">
      <Link>JsonViewer\JsonObject.cs</Link>
    </Compile>
    <Compile Include="..\..\..\..\jsonViewer\JsonViewer\JsonObjectTree.cs">
      <Link>JsonViewer\JsonObjectTree.cs</Link>
    </Compile>
    <Compile Include="..\..\..\..\jsonViewer\JsonViewer\JsonObjectTypeConverter.cs">
      <Link>JsonViewer\JsonObjectTypeConverter.cs</Link>
    </Compile>
    <Compile Include="..\..\..\..\jsonViewer\JsonViewer\JsonObjectVisualizer.cs">
      <Link>JsonViewer\JsonObjectVisualizer.cs</Link>
    </Compile>
    <Compile Include="..\..\..\..\jsonViewer\JsonViewer\JsonObjectVisualizer.Designer.cs">
      <Link>JsonViewer\JsonObjectVisualizer.Designer.cs</Link>
      <DependentUpon>JsonObjectVisualizer.cs</DependentUpon>
    </Compile>
    <Compile Include="..\..\..\..\jsonViewer\JsonViewer\JsonTreeObjectTypeDescriptor.cs">
      <Link>JsonViewer\JsonTreeObjectTypeDescriptor.cs</Link>
    </Compile>
    <Compile Include="..\..\..\..\jsonViewer\JsonViewer\JsonViewer.cs">
      <Link>JsonViewer\JsonViewer.cs</Link>
    </Compile>
    <Compile Include="..\..\..\..\jsonViewer\JsonViewer\JsonViewer.Designer.cs">
      <Link>JsonViewer\JsonViewer.Designer.cs</Link>
      <DependentUpon>JsonViewer.cs</DependentUpon>
    </Compile>
    <Compile Include="..\..\..\..\jsonViewer\JsonViewer\PluginsManager.cs">
      <Link>JsonViewer\PluginsManager.cs</Link>
    </Compile>
    <Compile Include="..\..\..\..\jsonViewer\JsonViewer\UnbufferedStringReader.cs">
      <Link>JsonViewer\UnbufferedStringReader.cs</Link>
    </Compile>
    <Compile Include="..\..\..\..\jsonViewer\JsonViewer\ViewerConfiguration.cs">
      <Link>JsonViewer\ViewerConfiguration.cs</Link>
    </Compile>

    <Compile Include="..\..\..\..\jsonViewer\JsonViewer\Properties\AssemblyInfo.cs">
      <Link>JsonViewer\Properties\AssemblyInfo.cs</Link>
    </Compile>
    <Compile Include="Properties\Resources.Designer.cs">
      <AutoGen>True</AutoGen>
      <DesignTime>True</DesignTime>
      <DependentUpon>Resources.resx</DependentUpon>
    </Compile>
  </ItemGroup>

  <ItemGroup>
    <EmbeddedResource Include="..\..\..\..\jsonViewer\JsonViewer\GridVisualizer.resx">
      <Link>JsonViewer\GridVisualizer.resx</Link>
      <DependentUpon>GridVisualizer.cs</DependentUpon>
    </EmbeddedResource>
    <EmbeddedResource Include="..\..\..\..\jsonViewer\JsonViewer\JsonObjectVisualizer.resx">
      <Link>JsonViewer\JsonObjectVisualizer.resx</Link>
      <DependentUpon>JsonObjectVisualizer.cs</DependentUpon>
    </EmbeddedResource>
    <EmbeddedResource Include="..\..\..\..\jsonViewer\JsonViewer\JsonViewer.resx">
      <Link>JsonViewer\JsonViewer.resx</Link>
      <DependentUpon>JsonViewer.cs</DependentUpon>
    </EmbeddedResource>
    <EmbeddedResource Include="Properties\Resources.resx">
      <Generator>ResXFileCodeGenerator</Generator>
      <LastGenOutput>Resources.Designer.cs</LastGenOutput>
    </EmbeddedResource>
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="Newtonsoft.Json" Version="13.0.3" />
    <Reference Include="System.Configuration" />
  </ItemGroup>

  <Target Name="EnsureRestoreBeforeBuild"
          BeforeTargets="CollectPackageReferences;CollectPackageReferencesDesignTime;ResolveReferences;PrepareForBuild"
          Condition="'$(RestoreDuringBuild)' != 'true' and '$(ProjectAssetsFile)' != '' and !Exists('$(ProjectAssetsFile)')">
    <Message Text="Running implicit restore for $(MSBuildProjectName) (missing $(ProjectAssetsFile))."
             Importance="High" />
    <MSBuild Projects="$(MSBuildProjectFullPath)"
             Targets="Restore"
             Properties="RestoreDuringBuild=true" />
  </Target>
</Project>
